$schema: "https://json-schema.org/draft/2020-12/schema"
title: "IoT Sensor Data Schema"
type: object
properties:
  devices:
    type: array
    items:
      $ref: "#/$defs/Device"
  readings:
    type: array
    items:
      $ref: "#/$defs/SensorReading"
examples:
  - devices:
      - device_id: "550e8400-e29b-41d4-a716-446655440000"
        device_type: "temperature"
    readings:
      - reading_id: "123e4567-e89b-12d3-a456-426614174000"
        device_id: "550e8400-e29b-41d4-a716-446655440000"
        timestamp: "2024-01-15T10:30:00Z"
        value: 23.5
$defs:
  Device:
    type: object
    properties:
      device_id:
        type: string
        format: uuid
      device_type:
        type: string
        enum: ["temperature", "humidity", "pressure", "motion"]
      location:
        type: object
        properties:
          latitude:
            type: number
          longitude:
            type: number
        required: ["latitude", "longitude"]
    required: ["device_id", "device_type"]
    examples:
      - device_id: "550e8400-e29b-41d4-a716-446655440000"
        device_type: "temperature"
        location:
          latitude: 37.7749
          longitude: -122.4194
      - device_id: "6ba7b810-9dad-11d1-80b4-00c04fd430c8"
        device_type: "motion"
  SensorReading:
    type: object
    properties:
      reading_id:
        type: string
        format: uuid
      device_id:
        type: string
        format: uuid
      timestamp:
        type: string
        format: date-time
      value:
        type: number
      unit:
        type: string
    required: ["reading_id", "device_id", "timestamp", "value"]
    examples:
      - reading_id: "123e4567-e89b-12d3-a456-426614174000"
        device_id: "550e8400-e29b-41d4-a716-446655440000"
        timestamp: "2024-01-15T10:30:00Z"
        value: 23.5
        unit: "Â°C"
      - reading_id: "987fcdeb-51a2-43d8-b123-456789abcdef"
        device_id: "6ba7b810-9dad-11d1-80b4-00c04fd430c8"
        timestamp: "2024-01-15T10:31:00Z"
        value: 1013.25
        unit: "hPa"
