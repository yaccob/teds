$schema: "https://json-schema.org/draft/2020-12/schema"
title: "Gaming Platform Schema"
type: object
examples:
  - players:
      - player_id: "550e8400-e29b-41d4-a716-446655440001"
        username: "shadow_gamer123"
        email: "alex.shadow@email.com"
        profile:
          display_name: "Shadow Gamer"
          avatar_url: "https://cdn.gaming.com/avatars/shadow_gamer.png"
          country: "US"
          preferred_language: "en"
          bio: "Competitive FPS player, always looking for new challenges!"
          privacy_settings:
            profile_visible: true
            stats_visible: true
            online_status_visible: false
            allow_friend_requests: true
        stats:
          total_games_played: 1247
          total_wins: 823
          total_losses: 424
          win_rate: 0.66
          ranking: 1584
          skill_level: "gold"
          total_playtime_hours: 342.5
        achievements:
          - achievement_id: "550e8400-e29b-41d4-a716-446655440050"
            name: "First Victory"
            description: "Win your first match"
            category: "milestone"
            rarity: "common"
            icon_url: "https://cdn.gaming.com/achievements/first_victory.png"
            unlocked_at: "2024-01-15T14:30:00Z"
            progress:
              current: 1
              required: 1
        created_at: "2024-01-15T10:00:00Z"
        last_active: "2024-10-01T09:45:00Z"
    games:
      - game_id: "550e8400-e29b-41d4-a716-446655440010"
        title: "Tactical Strike"
        genre: "fps"
        max_players: 10
        min_players: 2
        game_modes: ["Team Deathmatch", "Capture the Flag", "Search and Destroy"]
        maps:
          - map_id: "550e8400-e29b-41d4-a716-446655440020"
            name: "Industrial Complex"
            description: "Urban warfare in an abandoned factory setting"
            game_modes: ["Team Deathmatch", "Search and Destroy"]
            size: "medium"
            environment: "urban"
        version: "2.1.3"
        release_date: "2023-03-15"
    matches:
      - match_id: "550e8400-e29b-41d4-a716-446655440030"
        game_id: "550e8400-e29b-41d4-a716-446655440010"
        game_mode: "Team Deathmatch"
        map_id: "550e8400-e29b-41d4-a716-446655440020"
        players:
          - player_id: "550e8400-e29b-41d4-a716-446655440001"
            team_id: "550e8400-e29b-41d4-a716-446655440040"
            character: "Assault Specialist"
            score: 1850
            kills: 15
            deaths: 8
            assists: 6
            joined_at: "2024-10-01T20:00:00Z"
            left_at: "2024-10-01T20:18:00Z"
        teams:
          - team_id: "550e8400-e29b-41d4-a716-446655440040"
            name: "Alpha Team"
            color: "blue"
            score: 75
            player_ids: ["550e8400-e29b-41d4-a716-446655440001"]
          - team_id: "550e8400-e29b-41d4-a716-446655440041"
            name: "Bravo Team"
            color: "red"
            score: 62
            player_ids: []
        start_time: "2024-10-01T20:00:00Z"
        end_time: "2024-10-01T20:18:00Z"
        duration_seconds: 1080
        status: "completed"
        winner: "550e8400-e29b-41d4-a716-446655440040"
    tournaments:
      - tournament_id: "550e8400-e29b-41d4-a716-446655440060"
        name: "Autumn Championship 2024"
        game_id: "550e8400-e29b-41d4-a716-446655440010"
        format: "single_elimination"
        max_participants: 64
        prize_pool:
          amount: 10000.00
          currency: "USD"
        registration_start: "2024-09-01T00:00:00Z"
        registration_end: "2024-09-30T23:59:59Z"
        start_date: "2024-10-15T18:00:00Z"
        end_date: "2024-10-20T22:00:00Z"
        status: "registration_open"
        participants: ["550e8400-e29b-41d4-a716-446655440001"]
        matches: []
properties:
  players:
    type: array
    items:
      $ref: "#/$defs/Player"
  games:
    type: array
    items:
      $ref: "#/$defs/Game"
  matches:
    type: array
    items:
      $ref: "#/$defs/Match"
  tournaments:
    type: array
    items:
      $ref: "#/$defs/Tournament"
$defs:
  Player:
    type: object
    properties:
      player_id:
        type: string
        format: uuid
      username:
        type: string
        pattern: "^[a-zA-Z0-9_]{3,20}$"
      email:
        type: string
        format: email
      profile:
        $ref: "#/$defs/PlayerProfile"
      stats:
        $ref: "#/$defs/PlayerStats"
      achievements:
        type: array
        items:
          $ref: "#/$defs/Achievement"
      created_at:
        type: string
        format: date-time
      last_active:
        type: string
        format: date-time
    required: ["player_id", "username", "email", "created_at"]
  PlayerProfile:
    type: object
    properties:
      display_name:
        type: string
        maxLength: 30
      avatar_url:
        type: string
        format: uri
      country:
        type: string
        pattern: "^[A-Z]{2}$"
      preferred_language:
        type: string
        enum: ["en", "es", "fr", "de", "it", "pt", "ja", "zh", "ko", "ru"]
      bio:
        type: string
        maxLength: 200
      privacy_settings:
        $ref: "#/$defs/PrivacySettings"
  PrivacySettings:
    type: object
    properties:
      profile_visible:
        type: boolean
        default: true
      stats_visible:
        type: boolean
        default: true
      online_status_visible:
        type: boolean
        default: true
      allow_friend_requests:
        type: boolean
        default: true
  PlayerStats:
    type: object
    properties:
      total_games_played:
        type: integer
        minimum: 0
      total_wins:
        type: integer
        minimum: 0
      total_losses:
        type: integer
        minimum: 0
      win_rate:
        type: number
        minimum: 0
        maximum: 1
      ranking:
        type: integer
        minimum: 1
      skill_level:
        type: string
        enum: ["bronze", "silver", "gold", "platinum", "diamond", "master", "grandmaster"]
      total_playtime_hours:
        type: number
        minimum: 0
  Game:
    type: object
    properties:
      game_id:
        type: string
        format: uuid
      title:
        type: string
        maxLength: 100
      genre:
        type: string
        enum: ["fps", "moba", "strategy", "rpg", "racing", "sports", "puzzle", "fighting"]
      max_players:
        type: integer
        minimum: 1
        maximum: 100
      min_players:
        type: integer
        minimum: 1
      game_modes:
        type: array
        items:
          type: string
        uniqueItems: true
      maps:
        type: array
        items:
          $ref: "#/$defs/Map"
      version:
        type: string
        pattern: "^\\d+\\.\\d+\\.\\d+$"
      release_date:
        type: string
        format: date
    required: ["game_id", "title", "genre", "max_players", "min_players", "version"]
  Map:
    type: object
    properties:
      map_id:
        type: string
        format: uuid
      name:
        type: string
        maxLength: 50
      description:
        type: string
        maxLength: 200
      game_modes:
        type: array
        items:
          type: string
      size:
        type: string
        enum: ["small", "medium", "large", "extra_large"]
      environment:
        type: string
        enum: ["urban", "desert", "forest", "arctic", "space", "fantasy"]
    required: ["map_id", "name", "game_modes"]
  Match:
    type: object
    properties:
      match_id:
        type: string
        format: uuid
      game_id:
        type: string
        format: uuid
      game_mode:
        type: string
      map_id:
        type: string
        format: uuid
      players:
        type: array
        items:
          $ref: "#/$defs/MatchPlayer"
        minItems: 1
      teams:
        type: array
        items:
          $ref: "#/$defs/Team"
      start_time:
        type: string
        format: date-time
      end_time:
        type: string
        format: date-time
      duration_seconds:
        type: integer
        minimum: 0
      status:
        type: string
        enum: ["scheduled", "in_progress", "completed", "cancelled", "abandoned"]
      winner:
        oneOf:
          - type: string
            format: uuid
          - type: "null"
    required: ["match_id", "game_id", "game_mode", "players", "start_time", "status"]
  MatchPlayer:
    type: object
    properties:
      player_id:
        type: string
        format: uuid
      team_id:
        type: string
        format: uuid
      character:
        type: string
      score:
        type: integer
        minimum: 0
      kills:
        type: integer
        minimum: 0
      deaths:
        type: integer
        minimum: 0
      assists:
        type: integer
        minimum: 0
      joined_at:
        type: string
        format: date-time
      left_at:
        type: string
        format: date-time
    required: ["player_id", "joined_at"]
  Team:
    type: object
    properties:
      team_id:
        type: string
        format: uuid
      name:
        type: string
        maxLength: 30
      color:
        type: string
        enum: ["red", "blue", "green", "yellow", "purple", "orange"]
      score:
        type: integer
        minimum: 0
      player_ids:
        type: array
        items:
          type: string
          format: uuid
    required: ["team_id", "name", "player_ids"]
  Tournament:
    type: object
    properties:
      tournament_id:
        type: string
        format: uuid
      name:
        type: string
        maxLength: 100
      game_id:
        type: string
        format: uuid
      format:
        type: string
        enum: ["single_elimination", "double_elimination", "round_robin", "swiss"]
      max_participants:
        type: integer
        minimum: 2
      prize_pool:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Money"
      registration_start:
        type: string
        format: date-time
      registration_end:
        type: string
        format: date-time
      start_date:
        type: string
        format: date-time
      end_date:
        type: string
        format: date-time
      status:
        type: string
        enum: ["upcoming", "registration_open", "registration_closed", "in_progress", "completed", "cancelled"]
      participants:
        type: array
        items:
          type: string
          format: uuid
      matches:
        type: array
        items:
          type: string
          format: uuid
    required: ["tournament_id", "name", "game_id", "format", "max_participants", "start_date", "status"]
  Achievement:
    type: object
    properties:
      achievement_id:
        type: string
        format: uuid
      name:
        type: string
        maxLength: 50
      description:
        type: string
        maxLength: 200
      category:
        type: string
        enum: ["skill", "milestone", "special", "seasonal"]
      rarity:
        type: string
        enum: ["common", "uncommon", "rare", "epic", "legendary"]
      icon_url:
        type: string
        format: uri
      unlocked_at:
        type: string
        format: date-time
      progress:
        type: object
        properties:
          current:
            type: integer
            minimum: 0
          required:
            type: integer
            minimum: 1
        required: ["current", "required"]
    required: ["achievement_id", "name", "description", "category", "rarity"]
