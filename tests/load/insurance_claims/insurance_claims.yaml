$schema: "https://json-schema.org/draft/2020-12/schema"
title: "Insurance Claims Management Schema"
type: object
examples:
  - policies:
      - policy_id: "550e8400-e29b-41d4-a716-446655440001"
        policy_number: "POL-12345678"
        policyholder_id: "550e8400-e29b-41d4-a716-446655440010"
        policy_type: "auto"
        coverage_type: "comprehensive"
        premium:
          amount: 1200.00
          currency: "USD"
        deductible:
          amount: 500.00
          currency: "USD"
        coverage_limit:
          amount: 100000.00
          currency: "USD"
        effective_date: "2024-01-01"
        expiration_date: "2024-12-31"
        status: "active"
        covered_items:
          - item_id: "550e8400-e29b-41d4-a716-446655440020"
            item_type: "vehicle"
            description: "2022 Honda Civic Sedan"
            value:
              amount: 25000.00
              currency: "USD"
            details:
              make: "Honda"
              model: "Civic"
              year: 2022
              vin: "1HGBH41JXMN109186"
              license_plate: "ABC-1234"
    claims:
      - claim_id: "550e8400-e29b-41d4-a716-446655440030"
        claim_number: "CLM-87654321"
        policy_id: "550e8400-e29b-41d4-a716-446655440001"
        incident_date: "2024-09-25"
        reported_date: "2024-09-26"
        claim_type: "accident"
        description: "Rear-end collision at intersection of Main St and Oak Ave. Other driver ran red light and struck insured vehicle from behind. Moderate damage to rear bumper and trunk area. No injuries reported."
        location:
          address: "Main St & Oak Ave"
          city: "Springfield"
          state: "IL"
          postal_code: "62701"
          country: "United States"
          latitude: 39.7817
          longitude: -89.6501
        estimated_loss:
          amount: 4500.00
          currency: "USD"
        claimed_amount:
          amount: 4200.00
          currency: "USD"
        approved_amount:
          amount: 3800.00
          currency: "USD"
        status: "approved"
        adjuster_id: "550e8400-e29b-41d4-a716-446655440040"
        documents:
          - document_id: "550e8400-e29b-41d4-a716-446655440050"
            document_type: "police_report"
            file_name: "police_report_20240925.pdf"
            file_url: "https://claims.insureco.com/docs/police_report_20240925.pdf"
            uploaded_date: "2024-09-26T14:30:00Z"
            uploaded_by: "John Smith (Policyholder)"
          - document_id: "550e8400-e29b-41d4-a716-446655440051"
            document_type: "photo"
            file_name: "vehicle_damage_rear.jpg"
            file_url: "https://claims.insureco.com/docs/vehicle_damage_rear.jpg"
            uploaded_date: "2024-09-26T15:45:00Z"
            uploaded_by: "John Smith (Policyholder)"
        timeline:
          - event_id: "550e8400-e29b-41d4-a716-446655440060"
            event_type: "submitted"
            date: "2024-09-26T10:15:00Z"
            user: "John Smith"
            notes: "Initial claim submission via mobile app"
          - event_id: "550e8400-e29b-41d4-a716-446655440061"
            event_type: "assigned"
            date: "2024-09-26T11:30:00Z"
            user: "System"
            notes: "Automatically assigned to adjuster based on location and claim type"
          - event_id: "550e8400-e29b-41d4-a716-446655440062"
            event_type: "approved"
            date: "2024-09-28T16:20:00Z"
            user: "Jane Doe (Adjuster)"
            notes: "Claim approved after review of documentation and inspection"
    policyholders:
      - policyholder_id: "550e8400-e29b-41d4-a716-446655440010"
        name:
          first_name: "John"
          middle_name: "Michael"
          last_name: "Smith"
        email: "john.smith@email.com"
        phone: "+15551234567"
        address:
          street: "123 Elm Street"
          city: "Springfield"
          state: "Illinois"
          postal_code: "62701"
          country: "United States"
        date_of_birth: "1980-04-15"
        ssn: "123-45-6789"
        driver_license: "S123456789012"
        credit_score: 742
    adjusters:
      - adjuster_id: "550e8400-e29b-41d4-a716-446655440040"
        name:
          first_name: "Jane"
          last_name: "Doe"
        email: "jane.doe@insureco.com"
        phone: "+15559876543"
        license_number: "ADJ-IL-123456"
        specialties: ["auto", "property"]
        hire_date: "2020-03-01"
        active_caseload: 23
        max_authority:
          amount: 25000.00
          currency: "USD"
properties:
  policies:
    type: array
    items:
      $ref: "#/$defs/Policy"
  claims:
    type: array
    items:
      $ref: "#/$defs/Claim"
  policyholders:
    type: array
    items:
      $ref: "#/$defs/Policyholder"
  adjusters:
    type: array
    items:
      $ref: "#/$defs/Adjuster"
$defs:
  Policyholder:
    type: object
    properties:
      policyholder_id:
        type: string
        format: uuid
      name:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/PersonName"
      email:
        type: string
        format: email
      phone:
        type: string
        pattern: "^\\+?[1-9]\\d{1,14}$"
      address:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Address"
      date_of_birth:
        type: string
        format: date
      ssn:
        type: string
        pattern: "^[0-9]{3}-[0-9]{2}-[0-9]{4}$"
      driver_license:
        type: string
      credit_score:
        type: integer
        minimum: 300
        maximum: 850
    required: ["policyholder_id", "name", "email", "phone", "address", "date_of_birth"]
  Policy:
    type: object
    properties:
      policy_id:
        type: string
        format: uuid
      policy_number:
        type: string
        pattern: "^POL-[0-9]{8}$"
      policyholder_id:
        type: string
        format: uuid
      policy_type:
        type: string
        enum: ["auto", "home", "life", "health", "business", "travel"]
      coverage_type:
        type: string
        enum: ["basic", "standard", "premium", "comprehensive"]
      premium:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Money"
      deductible:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Money"
      coverage_limit:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Money"
      effective_date:
        type: string
        format: date
      expiration_date:
        type: string
        format: date
      status:
        type: string
        enum: ["active", "suspended", "cancelled", "expired"]
      covered_items:
        type: array
        items:
          $ref: "#/$defs/CoveredItem"
    required: ["policy_id", "policy_number", "policyholder_id", "policy_type", "coverage_type", "premium", "deductible", "effective_date", "expiration_date", "status"]
  CoveredItem:
    type: object
    properties:
      item_id:
        type: string
        format: uuid
      item_type:
        type: string
        enum: ["vehicle", "property", "person", "business_equipment"]
      description:
        type: string
        maxLength: 200
      value:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Money"
      details:
        oneOf:
          - $ref: "#/$defs/VehicleDetails"
          - $ref: "#/$defs/PropertyDetails"
    required: ["item_id", "item_type", "description", "value"]
  VehicleDetails:
    type: object
    properties:
      make:
        type: string
      model:
        type: string
      year:
        type: integer
        minimum: 1900
      vin:
        type: string
        pattern: "^[A-HJ-NPR-Z0-9]{17}$"
      license_plate:
        type: string
    required: ["make", "model", "year", "vin"]
  PropertyDetails:
    type: object
    properties:
      property_type:
        type: string
        enum: ["single_family", "condo", "apartment", "commercial"]
      address:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Address"
      square_feet:
        type: integer
        minimum: 100
      year_built:
        type: integer
        minimum: 1800
    required: ["property_type", "address", "square_feet", "year_built"]
  Claim:
    type: object
    properties:
      claim_id:
        type: string
        format: uuid
      claim_number:
        type: string
        pattern: "^CLM-[0-9]{8}$"
      policy_id:
        type: string
        format: uuid
      incident_date:
        type: string
        format: date
      reported_date:
        type: string
        format: date
      claim_type:
        type: string
        enum: ["accident", "theft", "fire", "flood", "vandalism", "medical", "liability", "other"]
      description:
        type: string
        maxLength: 2000
      location:
        $ref: "../logistics_shipping/logistics.yaml#/$defs/Location"
      estimated_loss:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Money"
      claimed_amount:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Money"
      approved_amount:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Money"
      status:
        type: string
        enum: ["submitted", "under_review", "investigating", "approved", "denied", "closed", "pending_payment"]
      adjuster_id:
        type: string
        format: uuid
      documents:
        type: array
        items:
          $ref: "#/$defs/ClaimDocument"
      timeline:
        type: array
        items:
          $ref: "#/$defs/ClaimEvent"
    required: ["claim_id", "claim_number", "policy_id", "incident_date", "reported_date", "claim_type", "description", "estimated_loss", "status"]
  ClaimDocument:
    type: object
    properties:
      document_id:
        type: string
        format: uuid
      document_type:
        type: string
        enum: ["police_report", "medical_record", "receipt", "photo", "estimate", "statement", "other"]
      file_name:
        type: string
      file_url:
        type: string
        format: uri
      uploaded_date:
        type: string
        format: date-time
      uploaded_by:
        type: string
    required: ["document_id", "document_type", "file_name", "file_url", "uploaded_date", "uploaded_by"]
  ClaimEvent:
    type: object
    properties:
      event_id:
        type: string
        format: uuid
      event_type:
        type: string
        enum: ["submitted", "assigned", "reviewed", "approved", "denied", "payment_issued", "closed"]
      date:
        type: string
        format: date-time
      user:
        type: string
      notes:
        type: string
        maxLength: 500
    required: ["event_id", "event_type", "date", "user"]
  Adjuster:
    type: object
    properties:
      adjuster_id:
        type: string
        format: uuid
      name:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/PersonName"
      email:
        type: string
        format: email
      phone:
        type: string
        pattern: "^\\+?[1-9]\\d{1,14}$"
      license_number:
        type: string
      specialties:
        type: array
        items:
          type: string
          enum: ["auto", "property", "medical", "commercial", "fraud"]
      hire_date:
        type: string
        format: date
      active_caseload:
        type: integer
        minimum: 0
      max_authority:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Money"
    required: ["adjuster_id", "name", "email", "phone", "license_number", "hire_date"]
