$schema: "https://json-schema.org/draft/2020-12/schema"
title: "Supply Chain Management Schema"
type: object
properties:
  suppliers:
    type: array
    items:
      $ref: "#/$defs/Supplier"
  purchase_orders:
    type: array
    items:
      $ref: "#/$defs/PurchaseOrder"
  inventory:
    type: array
    items:
      $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/InventoryItem"
  shipments:
    type: array
    items:
      $ref: "../logistics_shipping/logistics.yaml#/$defs/Shipment"
$defs:
  Supplier:
    type: object
    examples:
      - supplier_id: "550e8400-e29b-41d4-a716-446655440001"
        name: "Global Electronics Supply Co."
        contact_person:
          first_name: "David"
          last_name: "Martinez"
        email: "david.martinez@globalsupply.com"
        phone: "+14155551234"
        address:
          street: "1500 Industrial Blvd"
          city: "San Jose"
          state: "California"
          postal_code: "95112"
          country: "United States"
        tax_id: "12-3456789"
        payment_terms: "net_30"
        credit_limit:
          amount: 500000.00
          currency: "USD"
        rating: 4
        products_supplied: ["550e8400-e29b-41d4-a716-446655440010"]
    properties:
      supplier_id:
        type: string
        format: uuid
      name:
        type: string
        maxLength: 100
      contact_person:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/PersonName"
      email:
        type: string
        format: email
      phone:
        type: string
        pattern: "^\\+?[1-9]\\d{1,14}$"
      address:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Address"
      tax_id:
        type: string
      payment_terms:
        type: string
        enum: ["net_15", "net_30", "net_45", "net_60", "cod", "prepaid"]
      credit_limit:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Money"
      rating:
        type: integer
        minimum: 1
        maximum: 5
      products_supplied:
        type: array
        items:
          type: string
          format: uuid
    required: ["supplier_id", "name", "contact_person", "email", "phone", "address", "payment_terms"]
  PurchaseOrder:
    type: object
    examples:
      - po_id: "550e8400-e29b-41d4-a716-446655440020"
        po_number: "PO-20240315"
        supplier_id: "550e8400-e29b-41d4-a716-446655440001"
        order_date: "2024-03-15"
        expected_delivery: "2024-03-30"
        status: "sent"
        items:
          - product_id: "550e8400-e29b-41d4-a716-446655440010"
            sku: "CHIP-ARM-M1-256"
            description: "ARM M1 Microprocessor 256GB"
            quantity: 100
            unit_price:
              amount: 145.50
              currency: "USD"
            total_price:
              amount: 14550.00
              currency: "USD"
            expected_delivery: "2024-03-30"
        subtotal:
          amount: 14550.00
          currency: "USD"
        tax_amount:
          amount: 1164.00
          currency: "USD"
        shipping_cost:
          amount: 125.00
          currency: "USD"
        total_amount:
          amount: 15839.00
          currency: "USD"
        payment_terms: "net_30"
    properties:
      po_id:
        type: string
        format: uuid
      po_number:
        type: string
        pattern: "^PO-[0-9]{8}$"
      supplier_id:
        type: string
        format: uuid
      order_date:
        type: string
        format: date
      expected_delivery:
        type: string
        format: date
      status:
        type: string
        enum: ["draft", "sent", "acknowledged", "shipped", "received", "cancelled"]
      items:
        type: array
        items:
          $ref: "#/$defs/POItem"
        minItems: 1
      subtotal:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Money"
      tax_amount:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Money"
      shipping_cost:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Money"
      total_amount:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Money"
      payment_terms:
        type: string
        enum: ["net_15", "net_30", "net_45", "net_60", "cod", "prepaid"]
    required: ["po_id", "po_number", "supplier_id", "order_date", "status", "items", "total_amount"]
  POItem:
    type: object
    properties:
      product_id:
        type: string
        format: uuid
      sku:
        type: string
      description:
        type: string
        maxLength: 200
      quantity:
        type: integer
        minimum: 1
      unit_price:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Money"
      total_price:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Money"
      expected_delivery:
        type: string
        format: date
    required: ["product_id", "sku", "description", "quantity", "unit_price", "total_price"]
