$schema: "https://json-schema.org/draft/2020-12/schema"
title: "Social Media Platform Schema"
type: object
properties:
  users:
    type: array
    items:
      $ref: "#/$defs/User"
  posts:
    type: array
    items:
      $ref: "#/$defs/Post"
  comments:
    type: array
    items:
      $ref: "#/$defs/Comment"
examples:
  - users:
      - user_id: "550e8400-e29b-41d4-a716-446655440000"
        username: "john_doe"
        email: "john@example.com"
    posts:
      - post_id: "123e4567-e89b-12d3-a456-426614174000"
        user_id: "550e8400-e29b-41d4-a716-446655440000"
        content: "Hello world!"
        created_at: "2024-01-15T10:30:00Z"
    comments:
      - comment_id: "987fcdeb-51a2-43d8-b123-456789abcdef"
        post_id: "123e4567-e89b-12d3-a456-426614174000"
        user_id: "550e8400-e29b-41d4-a716-446655440000"
        content: "Great post!"
        created_at: "2024-01-15T10:45:00Z"
$defs:
  User:
    type: object
    properties:
      user_id:
        type: string
        format: uuid
      username:
        type: string
        pattern: "^[a-zA-Z0-9_]{3,20}$"
      email:
        type: string
        format: email
      profile:
        $ref: "#/$defs/UserProfile"
      followers_count:
        type: integer
        minimum: 0
      following_count:
        type: integer
        minimum: 0
      verified:
        type: boolean
        default: false
    required: ["user_id", "username", "email"]
    examples:
      - user_id: "550e8400-e29b-41d4-a716-446655440000"
        username: "john_doe"
        email: "john@example.com"
        profile:
          display_name: "John Doe"
          bio: "Tech enthusiast and coffee lover"
          avatar_url: "https://example.com/avatar.jpg"
          location: "San Francisco"
          birth_date: "1990-05-15"
        followers_count: 1250
        following_count: 320
        verified: false
  UserProfile:
    type: object
    properties:
      display_name:
        type: string
        maxLength: 50
      bio:
        type: string
        maxLength: 160
      avatar_url:
        type: string
        format: uri
      location:
        type: string
        maxLength: 30
      website:
        type: string
        format: uri
      birth_date:
        type: string
        format: date
    examples:
      - display_name: "John Doe"
        bio: "Tech enthusiast and coffee lover ☕"
        avatar_url: "https://example.com/avatar.jpg"
        location: "San Francisco, CA"
        website: "https://johndoe.dev"
        birth_date: "1990-05-15"
  Post:
    type: object
    properties:
      post_id:
        type: string
        format: uuid
      user_id:
        type: string
        format: uuid
      content:
        type: string
        maxLength: 280
      media_urls:
        type: array
        items:
          type: string
          format: uri
        maxItems: 4
      hashtags:
        type: array
        items:
          type: string
          pattern: "^#[a-zA-Z0-9_]+$"
      mentions:
        type: array
        items:
          type: string
          pattern: "^@[a-zA-Z0-9_]+$"
      likes_count:
        type: integer
        minimum: 0
      shares_count:
        type: integer
        minimum: 0
      created_at:
        type: string
        format: date-time
    required: ["post_id", "user_id", "content", "created_at"]
    examples:
      - post_id: "123e4567-e89b-12d3-a456-426614174000"
        user_id: "550e8400-e29b-41d4-a716-446655440000"
        content: "Just discovered an amazing new coffee shop! ☕ #coffee #discovery"
        media_urls: ["https://example.com/coffee-shop.jpg"]
        hashtags: ["#coffee", "#discovery"]
        mentions: ["@coffeelover"]
        likes_count: 42
        shares_count: 8
        created_at: "2024-01-15T10:30:00Z"
  Comment:
    type: object
    properties:
      comment_id:
        type: string
        format: uuid
      post_id:
        type: string
        format: uuid
      user_id:
        type: string
        format: uuid
      content:
        type: string
        maxLength: 280
      parent_comment_id:
        type: string
        format: uuid
      likes_count:
        type: integer
        minimum: 0
      created_at:
        type: string
        format: date-time
    required: ["comment_id", "post_id", "user_id", "content", "created_at"]
    examples:
      - comment_id: "987fcdeb-51a2-43d8-b123-456789abcdef"
        post_id: "123e4567-e89b-12d3-a456-426614174000"
        user_id: "6ba7b810-9dad-11d1-80b4-00c04fd430c8"
        content: "Which coffee shop? I'm always looking for new places!"
        likes_count: 3
        created_at: "2024-01-15T10:45:00Z"
