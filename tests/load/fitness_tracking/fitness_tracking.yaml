$schema: "https://json-schema.org/draft/2020-12/schema"
title: "Fitness Tracking Application Schema"
type: object
examples:
  - users:
      - user_id: "550e8400-e29b-41d4-a716-446655440001"
        name:
          first_name: "Alex"
          last_name: "Johnson"
        email: "alex.johnson@email.com"
        date_of_birth: "1990-05-15"
        gender: "other"
        height_cm: 175.0
        weight_kg: 72.5
        activity_level: "moderately_active"
        goals: ["weight_loss", "endurance"]
        target_weight_kg: 68.0
        created_at: "2024-01-15T10:30:00Z"
    workouts:
      - workout_id: "550e8400-e29b-41d4-a716-446655440010"
        user_id: "550e8400-e29b-41d4-a716-446655440001"
        name: "Upper Body Strength"
        date: "2024-10-01"
        start_time: "2024-10-01T18:00:00Z"
        end_time: "2024-10-01T19:15:00Z"
        workout_type: "strength"
        exercises:
          - exercise_id: "550e8400-e29b-41d4-a716-446655440020"
            sets:
              - set_number: 1
                reps: 12
                weight_kg: 60.0
                completed: true
              - set_number: 2
                reps: 10
                weight_kg: 65.0
                completed: true
              - set_number: 3
                reps: 8
                weight_kg: 70.0
                completed: true
            rest_time_seconds: 90
            notes: "Felt strong today"
        total_calories_burned: 285
        notes: "Great workout, increased weight on bench press"
        rating: 4
    exercises:
      - exercise_id: "550e8400-e29b-41d4-a716-446655440020"
        name: "Bench Press"
        category: "chest"
        muscle_groups: ["chest", "triceps", "shoulders"]
        equipment: ["barbell"]
        difficulty: "intermediate"
        instructions: "Lie on bench, lower bar to chest, press up with control. Keep feet planted and core engaged."
        tips: "Grip bar slightly wider than shoulders. Don't bounce the bar off your chest."
    nutrition:
      - entry_id: "550e8400-e29b-41d4-a716-446655440030"
        user_id: "550e8400-e29b-41d4-a716-446655440001"
        date: "2024-10-01"
        meal_type: "breakfast"
        foods:
          - food_id: "550e8400-e29b-41d4-a716-446655440040"
            name: "Greek Yogurt"
            brand: "Chobani"
            serving_size: "1 cup (227g)"
            quantity: 1.0
            calories_per_serving: 130
            protein_g: 20.0
            carbs_g: 9.0
            fat_g: 0.0
            fiber_g: 0.0
            sugar_g: 6.0
          - food_id: "550e8400-e29b-41d4-a716-446655440041"
            name: "Blueberries"
            brand: "Fresh"
            serving_size: "1/2 cup (74g)"
            quantity: 1.0
            calories_per_serving: 42
            protein_g: 0.5
            carbs_g: 10.7
            fat_g: 0.2
            fiber_g: 1.8
            sugar_g: 7.2
        total_calories: 172
        total_protein_g: 20.5
        total_carbs_g: 19.7
        total_fat_g: 0.2
        total_fiber_g: 1.8
        total_sugar_g: 13.2
properties:
  users:
    type: array
    items:
      $ref: "#/$defs/User"
  workouts:
    type: array
    items:
      $ref: "#/$defs/Workout"
  exercises:
    type: array
    items:
      $ref: "#/$defs/Exercise"
  nutrition:
    type: array
    items:
      $ref: "#/$defs/NutritionEntry"
$defs:
  User:
    type: object
    properties:
      user_id:
        type: string
        format: uuid
      name:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/PersonName"
      email:
        type: string
        format: email
      date_of_birth:
        type: string
        format: date
      gender:
        type: string
        enum: ["male", "female", "other", "prefer_not_to_say"]
      height_cm:
        type: number
        minimum: 100
        maximum: 250
      weight_kg:
        type: number
        minimum: 20
        maximum: 300
      activity_level:
        type: string
        enum: ["sedentary", "lightly_active", "moderately_active", "very_active", "extremely_active"]
      goals:
        type: array
        items:
          type: string
          enum: ["weight_loss", "weight_gain", "muscle_gain", "endurance", "strength", "general_fitness"]
      target_weight_kg:
        type: number
        minimum: 20
        maximum: 300
      created_at:
        type: string
        format: date-time
    required: ["user_id", "name", "email", "date_of_birth", "height_cm", "weight_kg", "activity_level", "created_at"]
  Workout:
    type: object
    properties:
      workout_id:
        type: string
        format: uuid
      user_id:
        type: string
        format: uuid
      name:
        type: string
        maxLength: 100
      date:
        type: string
        format: date
      start_time:
        type: string
        format: date-time
      end_time:
        type: string
        format: date-time
      workout_type:
        type: string
        enum: ["strength", "cardio", "flexibility", "sports", "mixed"]
      exercises:
        type: array
        items:
          $ref: "#/$defs/WorkoutExercise"
        minItems: 1
      total_calories_burned:
        type: integer
        minimum: 0
      notes:
        type: string
        maxLength: 500
      rating:
        type: integer
        minimum: 1
        maximum: 5
    required: ["workout_id", "user_id", "name", "date", "start_time", "workout_type", "exercises"]
  Exercise:
    type: object
    properties:
      exercise_id:
        type: string
        format: uuid
      name:
        type: string
        maxLength: 100
      category:
        type: string
        enum: ["chest", "back", "shoulders", "arms", "legs", "core", "cardio", "full_body"]
      muscle_groups:
        type: array
        items:
          type: string
          enum: ["chest", "back", "shoulders", "biceps", "triceps", "forearms", "quads", "hamstrings", "glutes", "calves", "abs", "obliques"]
      equipment:
        type: array
        items:
          type: string
          enum: ["barbell", "dumbbell", "kettlebell", "machine", "cable", "bodyweight", "resistance_band", "medicine_ball"]
      difficulty:
        type: string
        enum: ["beginner", "intermediate", "advanced"]
      instructions:
        type: string
        maxLength: 1000
      tips:
        type: string
        maxLength: 500
    required: ["exercise_id", "name", "category", "muscle_groups", "difficulty"]
  WorkoutExercise:
    type: object
    properties:
      exercise_id:
        type: string
        format: uuid
      sets:
        type: array
        items:
          $ref: "#/$defs/ExerciseSet"
        minItems: 1
      rest_time_seconds:
        type: integer
        minimum: 0
      notes:
        type: string
        maxLength: 200
    required: ["exercise_id", "sets"]
  ExerciseSet:
    type: object
    properties:
      set_number:
        type: integer
        minimum: 1
      reps:
        type: integer
        minimum: 0
      weight_kg:
        type: number
        minimum: 0
      duration_seconds:
        type: integer
        minimum: 0
      distance_meters:
        type: number
        minimum: 0
      calories_burned:
        type: integer
        minimum: 0
      completed:
        type: boolean
        default: true
    required: ["set_number"]
  NutritionEntry:
    type: object
    properties:
      entry_id:
        type: string
        format: uuid
      user_id:
        type: string
        format: uuid
      date:
        type: string
        format: date
      meal_type:
        type: string
        enum: ["breakfast", "lunch", "dinner", "snack"]
      foods:
        type: array
        items:
          $ref: "#/$defs/FoodItem"
        minItems: 1
      total_calories:
        type: integer
        minimum: 0
      total_protein_g:
        type: number
        minimum: 0
      total_carbs_g:
        type: number
        minimum: 0
      total_fat_g:
        type: number
        minimum: 0
      total_fiber_g:
        type: number
        minimum: 0
      total_sugar_g:
        type: number
        minimum: 0
    required: ["entry_id", "user_id", "date", "meal_type", "foods", "total_calories"]
  FoodItem:
    type: object
    properties:
      food_id:
        type: string
        format: uuid
      name:
        type: string
        maxLength: 100
      brand:
        type: string
        maxLength: 50
      serving_size:
        type: string
      quantity:
        type: number
        minimum: 0
      calories_per_serving:
        type: integer
        minimum: 0
      protein_g:
        type: number
        minimum: 0
      carbs_g:
        type: number
        minimum: 0
      fat_g:
        type: number
        minimum: 0
      fiber_g:
        type: number
        minimum: 0
      sugar_g:
        type: number
        minimum: 0
    required: ["food_id", "name", "serving_size", "quantity", "calories_per_serving"]
