$schema: "https://json-schema.org/draft/2020-12/schema"
title: "Agricultural Management System Schema"
type: object
examples:
  - farms:
      - farm_id: "550e8400-e29b-41d4-a716-446655440001"
        name: "Green Valley Farm"
        owner:
          first_name: "John"
          middle_name: "Robert"
          last_name: "Smith"
        address:
          street: "1234 Farm Road"
          city: "Greenfield"
          state: "Iowa"
          postal_code: "50849"
          country: "United States"
        total_area_hectares: 240.5
        farm_type: "mixed"
        established_date: "2010-03-15"
        certifications: ["organic", "sustainable"]
        fields:
          - field_id: "550e8400-e29b-41d4-a716-446655440010"
            name: "North Field"
            area_hectares: 25.5
            soil_type: "loam"
            soil_ph: 6.8
            coordinates:
              - latitude: 42.1234
                longitude: -93.5678
              - latitude: 42.1244
                longitude: -93.5678
              - latitude: 42.1244
                longitude: -93.5688
              - latitude: 42.1234
                longitude: -93.5688
            slope_percentage: 2.5
            drainage: "good"
            current_crop_id: "550e8400-e29b-41d4-a716-446655440020"
        irrigation_systems:
          - system_id: "550e8400-e29b-41d4-a716-446655440030"
            type: "drip"
            field_ids: ["550e8400-e29b-41d4-a716-446655440010"]
            water_source: "well"
            flow_rate_liters_per_minute: 150.0
            installation_date: "2015-05-10"
            maintenance_schedule: "monthly"
            automated: true
        equipment:
          - equipment_id: "550e8400-e29b-41d4-a716-446655440040"
            name: "John Deere 7820"
            type: "tractor"
            manufacturer: "John Deere"
            model: "7820"
            year: 2018
            purchase_date: "2018-04-15"
            purchase_price:
              amount: 125000.00
              currency: "USD"
            operating_hours: 1245.5
            fuel_consumption_per_hour: 12.5
            maintenance_records: []
            status: "operational"
    crops:
      - crop_id: "550e8400-e29b-41d4-a716-446655440020"
        name: "Corn"
        variety: "Pioneer P1870"
        category: "cereal"
        planting_season: "spring"
        growing_days: 110
        water_requirements: "moderate"
        soil_requirements: ["loam", "silt"]
        optimal_temperature_c:
          minimum: 18.0
          maximum: 32.0
        yield_per_hectare_kg: 8500.0
        market_price_per_kg:
          amount: 0.25
          currency: "USD"
    livestock:
      - animal_id: "550e8400-e29b-41d4-a716-446655440050"
        ear_tag: "001A"
        species: "cattle"
        breed: "Holstein"
        date_of_birth: "2020-03-15"
        gender: "female"
        weight_kg: 550.0
        health_status: "healthy"
        vaccinations:
          - vaccine_name: "IBR/BVD"
            vaccination_date: "2024-01-15"
            next_due_date: "2025-01-15"
            veterinarian: "Dr. Sarah Johnson"
            batch_number: "VB2024-001"
        breeding_history:
          - breeding_date: "2023-05-10"
            mate_id: "550e8400-e29b-41d4-a716-446655440051"
            pregnancy_confirmed: true
            due_date: "2024-02-15"
            birth_date: "2024-02-18"
            offspring_count: 1
            offspring_ids: ["550e8400-e29b-41d4-a716-446655440052"]
        feed_consumption_kg_per_day: 25.0
        milk_production_liters_per_day: 28.5
        location: "Barn A"
    field_operations:
      - operation_id: "550e8400-e29b-41d4-a716-446655440060"
        field_id: "550e8400-e29b-41d4-a716-446655440010"
        operation_type: "planting"
        crop_id: "550e8400-e29b-41d4-a716-446655440020"
        operation_date: "2024-04-15"
        equipment_used: ["550e8400-e29b-41d4-a716-446655440040"]
        operator: "Mike Johnson"
        materials_used:
          - material_type: "seed"
            name: "Pioneer P1870 Corn Seed"
            quantity: 25.0
            unit: "kg"
            cost_per_unit:
              amount: 8.50
              currency: "USD"
        weather_conditions:
          timestamp: "2024-04-15T10:00:00Z"
          temperature_c: 22.0
          humidity_percent: 65.0
          pressure_hpa: 1013.25
          wind_speed_kmh: 8.5
          wind_direction_degrees: 225
          precipitation_mm: 0.0
          visibility_km: 10.0
          uv_index: 5
          weather_condition: "partly_cloudy"
        cost:
          amount: 450.00
          currency: "USD"
        notes: "Good planting conditions, soil temperature optimal"
    weather_data:
      - timestamp: "2024-04-15T10:00:00Z"
        temperature_c: 22.0
        humidity_percent: 65.0
        pressure_hpa: 1013.25
        wind_speed_kmh: 8.5
        wind_direction_degrees: 225
        precipitation_mm: 0.0
        visibility_km: 10.0
        uv_index: 5
        weather_condition: "partly_cloudy"
properties:
  farms:
    type: array
    items:
      $ref: "#/$defs/Farm"
  crops:
    type: array
    items:
      $ref: "#/$defs/Crop"
  livestock:
    type: array
    items:
      $ref: "#/$defs/Livestock"
  field_operations:
    type: array
    items:
      $ref: "#/$defs/FieldOperation"
  weather_data:
    type: array
    items:
      $ref: "../weather_data/weather_data.yaml#/$defs/WeatherObservation"
$defs:
  Farm:
    type: object
    properties:
      farm_id:
        type: string
        format: uuid
      name:
        type: string
        maxLength: 100
      owner:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/PersonName"
      address:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Address"
      total_area_hectares:
        type: number
        minimum: 0.1
      farm_type:
        type: string
        enum: ["crop", "livestock", "mixed", "organic", "dairy", "poultry"]
      established_date:
        type: string
        format: date
      certifications:
        type: array
        items:
          type: string
          enum: ["organic", "fair_trade", "rainforest_alliance", "gmo_free", "sustainable"]
      fields:
        type: array
        items:
          $ref: "#/$defs/Field"
      irrigation_systems:
        type: array
        items:
          $ref: "#/$defs/IrrigationSystem"
      equipment:
        type: array
        items:
          $ref: "#/$defs/Equipment"
    required: ["farm_id", "name", "owner", "address", "total_area_hectares", "farm_type", "established_date"]
  Field:
    type: object
    properties:
      field_id:
        type: string
        format: uuid
      name:
        type: string
        maxLength: 50
      area_hectares:
        type: number
        minimum: 0.01
      soil_type:
        type: string
        enum: ["clay", "sand", "silt", "loam", "peat", "chalk"]
      soil_ph:
        type: number
        minimum: 0
        maximum: 14
      coordinates:
        type: array
        items:
          type: object
          properties:
            latitude:
              type: number
              minimum: -90
              maximum: 90
            longitude:
              type: number
              minimum: -180
              maximum: 180
          required: ["latitude", "longitude"]
        minItems: 3
      slope_percentage:
        type: number
        minimum: 0
        maximum: 100
      drainage:
        type: string
        enum: ["poor", "moderate", "good", "excellent"]
      current_crop_id:
        type: string
        format: uuid
    required: ["field_id", "name", "area_hectares", "soil_type", "coordinates"]
  Crop:
    type: object
    properties:
      crop_id:
        type: string
        format: uuid
      name:
        type: string
        maxLength: 50
      variety:
        type: string
        maxLength: 50
      category:
        type: string
        enum: ["cereal", "vegetable", "fruit", "legume", "oilseed", "fiber", "forage"]
      planting_season:
        type: string
        enum: ["spring", "summer", "fall", "winter"]
      growing_days:
        type: integer
        minimum: 1
        maximum: 365
      water_requirements:
        type: string
        enum: ["low", "moderate", "high"]
      soil_requirements:
        type: array
        items:
          type: string
          enum: ["clay", "sand", "silt", "loam", "peat", "chalk"]
      optimal_temperature_c:
        $ref: "../manufacturing/manufacturing.yaml#/$defs/TemperatureRange"
      yield_per_hectare_kg:
        type: number
        minimum: 0
      market_price_per_kg:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Money"
    required: ["crop_id", "name", "category", "planting_season", "growing_days", "water_requirements"]
  Livestock:
    type: object
    properties:
      animal_id:
        type: string
        format: uuid
      ear_tag:
        type: string
      species:
        type: string
        enum: ["cattle", "sheep", "goat", "pig", "chicken", "turkey", "horse"]
      breed:
        type: string
      date_of_birth:
        type: string
        format: date
      gender:
        type: string
        enum: ["male", "female"]
      weight_kg:
        type: number
        minimum: 0.1
      health_status:
        type: string
        enum: ["healthy", "sick", "quarantine", "deceased"]
      vaccinations:
        type: array
        items:
          $ref: "#/$defs/Vaccination"
      breeding_history:
        type: array
        items:
          $ref: "#/$defs/BreedingRecord"
      feed_consumption_kg_per_day:
        type: number
        minimum: 0
      milk_production_liters_per_day:
        type: number
        minimum: 0
      location:
        type: string
        maxLength: 50
    required: ["animal_id", "ear_tag", "species", "breed", "date_of_birth", "gender", "health_status"]
  Vaccination:
    type: object
    properties:
      vaccine_name:
        type: string
      vaccination_date:
        type: string
        format: date
      next_due_date:
        type: string
        format: date
      veterinarian:
        type: string
      batch_number:
        type: string
    required: ["vaccine_name", "vaccination_date", "next_due_date"]
  BreedingRecord:
    type: object
    properties:
      breeding_date:
        type: string
        format: date
      mate_id:
        type: string
        format: uuid
      pregnancy_confirmed:
        type: boolean
      due_date:
        type: string
        format: date
      birth_date:
        type: string
        format: date
      offspring_count:
        type: integer
        minimum: 0
      offspring_ids:
        type: array
        items:
          type: string
          format: uuid
    required: ["breeding_date", "mate_id"]
  IrrigationSystem:
    type: object
    properties:
      system_id:
        type: string
        format: uuid
      type:
        type: string
        enum: ["drip", "sprinkler", "flood", "furrow", "center_pivot"]
      field_ids:
        type: array
        items:
          type: string
          format: uuid
      water_source:
        type: string
        enum: ["well", "river", "lake", "municipal", "rainwater"]
      flow_rate_liters_per_minute:
        type: number
        minimum: 1
      installation_date:
        type: string
        format: date
      maintenance_schedule:
        type: string
        enum: ["weekly", "monthly", "quarterly", "yearly"]
      automated:
        type: boolean
        default: false
    required: ["system_id", "type", "field_ids", "water_source", "flow_rate_liters_per_minute"]
  Equipment:
    type: object
    properties:
      equipment_id:
        type: string
        format: uuid
      name:
        type: string
        maxLength: 100
      type:
        type: string
        enum: ["tractor", "harvester", "planter", "cultivator", "sprayer", "mower", "trailer"]
      manufacturer:
        type: string
      model:
        type: string
      year:
        type: integer
        minimum: 1900
        maximum: 2030
      purchase_date:
        type: string
        format: date
      purchase_price:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Money"
      operating_hours:
        type: number
        minimum: 0
      fuel_consumption_per_hour:
        type: number
        minimum: 0
      maintenance_records:
        type: array
        items:
          $ref: "../fleet_management/fleet_management.yaml#/$defs/MaintenanceRecord"
      status:
        type: string
        enum: ["operational", "maintenance", "repair", "retired"]
    required: ["equipment_id", "name", "type", "manufacturer", "model", "year", "purchase_date", "status"]
  FieldOperation:
    type: object
    properties:
      operation_id:
        type: string
        format: uuid
      field_id:
        type: string
        format: uuid
      operation_type:
        type: string
        enum: ["planting", "harvesting", "fertilizing", "spraying", "irrigation", "cultivation", "weeding"]
      crop_id:
        type: string
        format: uuid
      operation_date:
        type: string
        format: date
      equipment_used:
        type: array
        items:
          type: string
          format: uuid
      operator:
        type: string
      materials_used:
        type: array
        items:
          $ref: "#/$defs/Material"
      weather_conditions:
        $ref: "../weather_data/weather_data.yaml#/$defs/WeatherObservation"
      cost:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Money"
      notes:
        type: string
        maxLength: 500
    required: ["operation_id", "field_id", "operation_type", "operation_date", "operator"]
  Material:
    type: object
    properties:
      material_type:
        type: string
        enum: ["seed", "fertilizer", "pesticide", "herbicide", "fuel"]
      name:
        type: string
      quantity:
        type: number
        minimum: 0
      unit:
        type: string
        enum: ["kg", "l", "g", "ml", "tons", "bags"]
      cost_per_unit:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Money"
    required: ["material_type", "name", "quantity", "unit", "cost_per_unit"]
