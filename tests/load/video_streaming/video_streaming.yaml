$schema: "https://json-schema.org/draft/2020-12/schema"
title: "Video Streaming Platform Schema"
type: object
properties:
  videos:
    type: array
    items:
      $ref: "#/$defs/Video"
  users:
    type: array
    items:
      $ref: "../social_media/social_media.yaml#/$defs/User"
  channels:
    type: array
    items:
      $ref: "#/$defs/Channel"
  playlists:
    type: array
    items:
      $ref: "#/$defs/Playlist"
examples:
  - videos:
      - video_id: "550e8400-e29b-41d4-a716-446655440000"
        title: "My First Video"
        channel_id: "6ba7b810-9dad-11d1-80b4-00c04fd430c8"
        duration_seconds: 300
        file_url: "https://example.com/video.mp4"
        upload_date: "2024-01-15T10:00:00Z"
        visibility: "public"
        category: "entertainment"
    users:
      - user_id: "123e4567-e89b-12d3-a456-426614174000"
        username: "creator1"
        email: "creator@example.com"
    channels:
      - channel_id: "6ba7b810-9dad-11d1-80b4-00c04fd430c8"
        name: "My Channel"
        owner_id: "123e4567-e89b-12d3-a456-426614174000"
        creation_date: "2024-01-01T00:00:00Z"
        category: "entertainment"
    playlists:
      - playlist_id: "987fcdeb-51a2-43d8-b123-456789abcdef"
        title: "My Playlist"
        channel_id: "6ba7b810-9dad-11d1-80b4-00c04fd430c8"
        visibility: "public"
        creation_date: "2024-01-10T00:00:00Z"
        videos:
          - video_id: "550e8400-e29b-41d4-a716-446655440000"
            position: 1
            added_date: "2024-01-10T00:00:00Z"
$defs:
  Video:
    type: object
    properties:
      video_id:
        type: string
        format: uuid
      title:
        type: string
        maxLength: 200
      description:
        type: string
        maxLength: 5000
      channel_id:
        type: string
        format: uuid
      duration_seconds:
        type: integer
        minimum: 1
      file_url:
        type: string
        format: uri
      thumbnail_url:
        type: string
        format: uri
      upload_date:
        type: string
        format: date-time
      visibility:
        type: string
        enum: ["public", "unlisted", "private"]
      category:
        type: string
        enum: ["entertainment", "education", "music", "gaming", "news", "sports", "technology", "travel", "lifestyle"]
      tags:
        type: array
        items:
          type: string
          maxLength: 30
        maxItems: 20
      view_count:
        type: integer
        minimum: 0
      like_count:
        type: integer
        minimum: 0
      dislike_count:
        type: integer
        minimum: 0
      comment_count:
        type: integer
        minimum: 0
      quality_options:
        type: array
        items:
          type: string
          enum: ["144p", "240p", "360p", "480p", "720p", "1080p", "1440p", "2160p"]
      subtitles:
        type: array
        items:
          $ref: "#/$defs/Subtitle"
      monetization:
        $ref: "#/$defs/Monetization"
    required: ["video_id", "title", "channel_id", "duration_seconds", "file_url", "upload_date", "visibility", "category"]
  Channel:
    type: object
    properties:
      channel_id:
        type: string
        format: uuid
      name:
        type: string
        maxLength: 100
      description:
        type: string
        maxLength: 2000
      owner_id:
        type: string
        format: uuid
      creation_date:
        type: string
        format: date-time
      subscriber_count:
        type: integer
        minimum: 0
      total_views:
        type: integer
        minimum: 0
      video_count:
        type: integer
        minimum: 0
      avatar_url:
        type: string
        format: uri
      banner_url:
        type: string
        format: uri
      verified:
        type: boolean
        default: false
      category:
        type: string
        enum: ["entertainment", "education", "music", "gaming", "news", "sports", "technology", "travel", "lifestyle"]
      social_links:
        type: object
        properties:
          website:
            type: string
            format: uri
          twitter:
            type: string
          instagram:
            type: string
          facebook:
            type: string
    required: ["channel_id", "name", "owner_id", "creation_date", "category"]
  Playlist:
    type: object
    properties:
      playlist_id:
        type: string
        format: uuid
      title:
        type: string
        maxLength: 150
      description:
        type: string
        maxLength: 1000
      channel_id:
        type: string
        format: uuid
      visibility:
        type: string
        enum: ["public", "unlisted", "private"]
      creation_date:
        type: string
        format: date-time
      videos:
        type: array
        items:
          $ref: "#/$defs/PlaylistVideo"
      view_count:
        type: integer
        minimum: 0
      thumbnail_url:
        type: string
        format: uri
    required: ["playlist_id", "title", "channel_id", "visibility", "creation_date", "videos"]
  PlaylistVideo:
    type: object
    properties:
      video_id:
        type: string
        format: uuid
      position:
        type: integer
        minimum: 1
      added_date:
        type: string
        format: date-time
    required: ["video_id", "position", "added_date"]
  Subtitle:
    type: object
    properties:
      language:
        type: string
        pattern: "^[a-z]{2}(-[A-Z]{2})?$"
      auto_generated:
        type: boolean
        default: false
      file_url:
        type: string
        format: uri
    required: ["language", "file_url"]
  Monetization:
    type: object
    properties:
      enabled:
        type: boolean
        default: false
      ad_revenue:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Money"
      sponsorship_revenue:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Money"
      merchandise_revenue:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Money"
      super_chat_revenue:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Money"
      membership_revenue:
        $ref: "../ecommerce_platform/ecommerce.yaml#/$defs/Money"
